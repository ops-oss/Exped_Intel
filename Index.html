<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Expedition Blueprint</title>
<style>
  :root{
    --bg: #ece8e4;           /* warm paper */
    --ink: #1e1e1e;          /* near-black */
    --muted: rgba(0,0,0,.65);
    --line: rgba(0,0,0,.14);
    --paper: #fff;
    --chip: #f7f4f2;
    --radius: 8px;           /* approved 8px (no pill) */
    --font: ui-sans-serif, -apple-system, "SF Pro Text", Inter, Roboto, "Helvetica Neue", Arial, system-ui, "Segoe UI", Cantarell, "Noto Sans";
    --h1: clamp(44px, 10vw, 92px);
    --h2: clamp(22px, 3.2vw, 36px);
    --h3: clamp(18px, 2.3vw, 22px);
    --label: 13px;
    --body: 18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--ink); font:400 var(--body)/1.55 var(--font);
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  img{display:block; max-width:100%; height:auto}
  .wrap{max-width:1040px; margin:0 auto; padding:20px 18px 44px; display:grid; row-gap:20px}
  header h1{
    margin:6px 0 8px; font-size:var(--h1); line-height:1.02; letter-spacing:-0.02em; font-weight:800;
  }

  /* Top actions – outline “ghost” buttons (no blue) */
  .actions{display:flex; gap:10px; flex-wrap:wrap; margin:8px 0 14px}
  .btn{
    display:inline-flex; align-items:center; gap:8px;
    border:1px solid var(--line); background:transparent; color:var(--ink);
    padding:10px 14px; border-radius:var(--radius); font-weight:600; text-decoration:none;
  }
  .btn svg{width:18px;height:18px;stroke-width:1.8}

  /* four stat tiles under title */
  .stats{display:grid; grid-template-columns:1fr 1fr; gap:14px 28px}
  @media (min-width:900px){ .stats{grid-template-columns:repeat(4,1fr)} }
  .stat .label{
    font-size:var(--label); letter-spacing:.18em; text-transform:uppercase; color:var(--muted);
    display:flex; align-items:center; gap:.5rem;
  }
  .stat .label svg{width:18px;height:18px;opacity:.95}
  .stat .value{font-weight:600; font-size:clamp(18px,2.6vw,26px); line-height:1.25; margin-top:4px}

  /* hero image frame (keeps your dashed look subtle) */
  .hero{
    border:1px dashed var(--line); border-radius:var(--radius); background:var(--paper);
    overflow:hidden;
  }

  /* Section shells */
  section{padding-top:16px; border-top:1px solid var(--line); margin-top:8px}
  section > h2{
    display:flex; align-items:center; gap:.6rem; font-size:var(--h2); line-height:1.2; margin:0 0 6px; font-weight:800;
  }
  section > h2 svg{width:24px;height:24px}
  .subtle h2 svg{width:20px;height:20px; opacity:.9} /* “subtle” sections keep icons small */

  .kv{display:grid; grid-template-columns:auto 1fr; gap:.5rem 1rem; align-items:start}
  .kv .k{font-weight:700}
  .kv .v{color:var(--muted)}

  /* chips */
  .chips{display:flex; flex-wrap:wrap; gap:.5rem; margin:10px 0 0; padding:0; list-style:none}
  .chip{display:inline-flex; align-items:center; gap:.45rem; border:1px solid var(--line); background:var(--chip);
        border-radius:10px; padding:.34rem .6rem; font-size:15px}
  .chip svg{width:18px;height:18px}

  /* map + gpx embeds */
  .embed{aspect-ratio:16/9; background:var(--paper); border:1px solid var(--line); border-radius:var(--radius); overflow:hidden}
  .embed iframe{width:100%;height:100%;border:0;display:block}

  /* Days */
  .day{border-top:1px solid var(--line); padding-top:14px; margin-top:12px}
  .day h3{display:flex; align-items:center; gap:.55rem; font-size:var(--h3); margin:0 0 6px}
  .day h3 svg{width:20px;height:20px}
  .day .preview{color:var(--muted); margin:0 0 8px}
  .spacer{height:6px} /* ensures visual breath between preview and chips */
  .meta{display:flex; flex-wrap:wrap; gap:.5rem}
  .meta .chip{background:var(--paper)}

  /* two-col utility */
  .grid2{display:grid; grid-template-columns:1fr; gap:18px 30px}
  @media (min-width:900px){ .grid2{grid-template-columns:1fr 1fr} }

  /* Footer note under GPX */
  .note{color:var(--muted); font-size:15px; margin-top:8px}
</style>

<!-- Inline SVGs — clean, neutral (Lucide/Tabler style; MIT/ISC) -->
<svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
  <symbol id="i-bookmark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M6 3h12a1 1 0 0 1 1 1v17l-7-4-7 4V4a1 1 0 0 1 1-1z"/>
  </symbol>
  <symbol id="i-share" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><path d="M8.6 13.5l6.8 3M15.4 7.5 8.6 10.5"/>
  </symbol>
  <symbol id="i-print" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M6 9V3h12v6"/><rect x="6" y="14" width="12" height="7" rx="1"/><path d="M6 18h12M6 12H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-1"/>
  </symbol>
  <symbol id="i-star" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 17l-5.5 3 1.5-6.2L3 9.5l6.4-.6L12 3l2.6 5.9 6.4.6-5 4.3 1.5 6.2z"/>
  </symbol>
  <symbol id="i-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="4"/><path d="M12 2v2M12 20v2M2 12h2M20 12h2M4.9 4.9l1.4 1.4M17.7 17.7l1.4 1.4M4.9 19.1l1.4-1.4M17.7 6.3l1.4-1.4"/>
  </symbol>
  <symbol id="i-pin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 22s-6-5.3-6-10a6 6 0 1 1 12 0c0 4.7-6 10-6 10z"/><circle cx="12" cy="12" r="2.4"/>
  </symbol>
  <symbol id="i-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="5" width="18" height="16" rx="2"/><path d="M16 3v4M8 3v4M3 11h18"/>
  </symbol>
  <symbol id="i-bus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="4" width="18" height="12" rx="2"/><circle cx="7" cy="16" r="2"/><circle cx="17" cy="16" r="2"/>
  </symbol>
  <symbol id="i-map" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M9 18l-6 3V6l6-3 6 3 6-3v15l-6 3-6-3z"/><path d="M9 3v15M15 6v15"/>
  </symbol>
  <symbol id="i-signpost" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M12 3v18"/><path d="M4 6h10l3 3H7z"/><path d="M20 14H10l-3-3h10z"/>
  </symbol>
  <symbol id="i-ruler" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <rect x="3" y="6" width="18" height="12" rx="2"/><path d="M7 6v12M11 6v12M15 6v12"/>
  </symbol>
  <symbol id="i-mountain" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M3 21l9-18 9 18z"/><path d="M12 9l2 4h-4z"/>
  </symbol>
  <symbol id="i-droplets" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M7 3c4 5 4 7 4 8a4 4 0 1 1-8 0c0-1 0-3 4-8z"/><path d="M17 9c3 4 3 6 3 7a3 3 0 1 1-6 0c0-1 0-3 3-7z"/>
  </symbol>
  <symbol id="i-alert" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M10.3 4.3L2.2 18a2 2 0 0 0 1.7 3h16.2a2 2 0 0 0 1.7-3L13.7 4.3a2 2 0 0 0-3.4 0z"/><path d="M12 9v5"/><path d="M12 18h.01"/>
  </symbol>
  <symbol id="i-idea" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M9 18h6M10 22h4"/><path d="M12 2a7 7 0 0 1 7 7c0 2.2-1 3.6-2.2 4.7a6 6 0 0 0-1.8 3.2H9a6 6 0 0 0-1.8-3.2C6 12.6 5 11.2 5 9a7 7 0 0 1 7-7z"/>
  </symbol>
  <symbol id="i-exit" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M3 21h18"/><path d="M14 3h-6v18h6V3z"/><circle cx="12" cy="12" r="1"/>
  </symbol>
  <symbol id="i-link" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M10 13a5 5 0 0 0 7.1 7.1l3-3a5 5 0 0 0-7.1-7.1"/><path d="M14 11a5 5 0 0 0-7.1-7.1l-3 3A5 5 0 0 0 11 14"/>
  </symbol>
  <symbol id="i-phone" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <rect x="7" y="2" width="10" height="20" rx="2"/><path d="M11 18h2"/>
  </symbol>
  <symbol id="i-clipboard" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <rect x="6" y="4" width="12" height="16" rx="2"/><path d="M9 4V2h6v2"/>
  </symbol>
  <symbol id="i-file" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><path d="M14 2v6h6"/>
  </symbol>
</svg>
</head>
<body>
  <div class="wrap" id="app">

    <!-- TOP -->
    <header>
      <h1 id="pageTitle"></h1>

      <div class="actions">
        <a class="btn" href="#" id="btnBookmark"><svg><use href="#i-bookmark"/></svg>Bookmark</a>
        <a class="btn" href="#" id="btnShare"><svg><use href="#i-share"/></svg>Share</a>
        <a class="btn" href="javascript:window.print()"><svg><use href="#i-print"/></svg>Print</a>
      </div>

      <div class="stats" id="stats">
        <!-- populated by JS -->
      </div>

      <div class="hero"><img id="heroImg" alt=""></div>
    </header>

    <!-- PERMITS & ENTRY + SHUTTLE/MAP (map first; text below map) -->
    <section id="permits" class="subtle">
      <h2><svg><use href="#i-clipboard"/></svg>Permits & Entry</h2>
      <div class="kv" id="permitsKV"></div>
    </section>

    <section id="shuttle">
      <h2><svg><use href="#i-bus"/></svg>Shuttle & Transportation</h2>
      <div class="embed" id="mapEmbed"></div>
      <div class="kv" id="shuttleKV" style="margin-top:10px"></div>
    </section>

    <section id="timeline" class="subtle">
      <h2><svg><use href="#i-calendar"/></svg>Permit & Shuttle Timeline</h2>
      <div class="kv" id="timelineKV"></div>
    </section>

    <!-- DAYS -->
    <section id="days">
      <h2><svg><use href="#i-signpost"/></svg>Expedition Days</h2>
      <div id="dayBlocks"></div>
    </section>

    <!-- OTHER INTEL -->
    <section id="camps" class="subtle">
      <h2><svg><use href="#i-tent"/></svg>Campsite Intel</h2>
      <ul class="chips" id="campChips"></ul>
    </section>

    <section id="weather" class="subtle">
      <h2><svg><use href="#i-sun"/></svg>Weather & Altitude Notes</h2>
      <ul class="chips" id="weatherChips"></ul>
    </section>

    <section id="gear" class="subtle">
      <h2><svg><use href="#i-clipboard"/></svg>Gear Checklist</h2>
      <ul class="chips" id="gearChips"></ul>
    </section>

    <section id="risk" class="subtle">
      <h2><svg><use href="#i-alert"/></svg>Risk Matrix & Hazard Timeline</h2>
      <ul class="chips" id="riskChips"></ul>
    </section>

    <section id="contacts" class="subtle">
      <h2><svg><use href="#i-phone"/></svg>Emergency Contacts</h2>
      <div class="kv" id="contactsKV"></div>
    </section>

    <!-- GPX just before disclaimer -->
    <section id="gpx">
      <h2><svg><use href="#i-map"/></svg>GPX Route & Elevation</h2>
      <div class="embed" id="gpxEmbed"></div>
      <ul class="chips" id="gpxChips"></ul>
      <div class="note" id="gpxNote"></div>
    </section>

    <section id="disclaimer" class="subtle">
      <h2><svg><use href="#i-file"/></svg>Field Disclaimer</h2>
      <div id="disclaimerText" class="note"></div>
    </section>

  </div>

<script>
(async function(){
  // 1) Try to fetch live JSON; else fall back to the embedded sample.
  let data;
  try{
    const r = await fetch('./trip.json', {cache:'no-store'});
    if (r.ok) data = await r.json();
  }catch(e){}
  if(!data) data = {
    title: "Teton Crest Trail Expedition",
    meta: {
      category: "End-to-End Traverse",
      season: "Fall",
      location: "Teton Crest Trail, Grand Teton NP, WY",
      date: "Sep 12, 2025"
    },
    hero: { src: "https://images.unsplash.com/photo-1526481280698-8fcc13fd714e?q=80&w=1600&auto=format&fit=crop", alt: "Grand Teton ridgeline" },

    permits: {
      requirement: "Yes",
      agency: "Grand Teton National Park",
      how: "Apply via Recreation.gov",
      window: "Opens January (apply early)",
      processing: "Immediate; Moderate — good odds if reserved at release",
      cost: "$45 per permit",
      id: "Government-issued ID"
    },

    shuttle: {
      nearest: "Jackson, WY – Jackson Hole (JAC)",
      access: "Point-to-point",
      start: "Top of Aerial Tramway",
      finish: "Leigh Lake Trailhead",
      parking: "Overnight at Leigh Lake Trailhead",
      outfitter: "Local shuttle; book in advance (~$50 pp)",
      mapEmbed: "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3147.993!2d-110.83!3d43.73!2m3!1f0!2f0!3f0!3m2!1i0!2i0!4f13.1"
    },

    timeline: [
      ["90 Days Out", "Apply permits; inquire shuttle"],
      ["30 Days Out", "Book lodging; confirm parking/cache"],
      ["7 Days Out",  "Check road/trail status; weather"],
      ["48 Hours Out","Final forecast; gear check; shuttle confirm"]
    ],

    days: [
      {
        title: "DAY 1: Top of Aerial Tramway → Marion Lake",
        preview: "Rocky alpine trails; limited water; watch for afternoon storms.",
        chips: [
          ["i-ruler","7 mi"],
          ["i-mountain","+1000 / -800 ft"],
          ["i-droplets","Fill at tram"],
          ["i-alert","Sudden weather"],
          ["i-idea","Start early"],
          ["i-exit","Bailout: Tram"],
          ["i-alert","Decision: Weather permits"]
        ]
      },
      {
        title: "DAY 2: Marion Lake → Sunset Lake",
        preview: "Exposed ridges through Alaska Basin; carry sun protection.",
        chips: [
          ["i-ruler","10 mi"],
          ["i-mountain","+1800 / -1600 ft"],
          ["i-droplets","Streams in Basin"],
          ["i-alert","Altitude watch"],
          ["i-idea","Layer up"],
          ["i-exit","Bailout: None"],
          ["i-alert","Decision: Hurricane Pass"]
        ]
      },
      {
        title: "DAY 3: Sunset Lake → N. Fork Cascade Canyon",
        preview: "Steep, rocky descents; more frequent water; use poles.",
        chips: [
          ["i-ruler","12 mi"],
          ["i-mountain","+2400 / -3000 ft"],
          ["i-droplets","Streams in canyon"],
          ["i-alert","Footing caution"],
          ["i-idea","Poles recommended"],
          ["i-exit","Bailout: None"],
          ["i-alert","Decision: Paintbrush Divide"]
        ]
      },
      {
        title: "DAY 4: N. Fork Cascade Canyon → Leigh Lake TH",
        preview: "Forested finish past lakes; less exposure; enjoy a mellow exit.",
        chips: [
          ["i-ruler","10 mi"],
          ["i-mountain","+2000 / -2800 ft"],
          ["i-droplets","Lakes & streams"],
          ["i-idea","Lakeside breaks"],
          ["i-exit","Bailout: Finish at TH"]
        ]
      }
    ],

    campsiteIntel: [
      ["i-tent","Marion Lake (9,300 ft)"],
      ["i-tent","Sunset Lake (9,600 ft)"],
      ["i-tent","N. Fork Cascade (8,300 ft)"]
    ],

    weatherNotes: [
      ["i-sun","Typical temps: 30°F–70°F"],
      ["i-sun","High sun exposure; minimal shade"],
      ["i-idea","Acclimatize a day in Jackson"]
    ],

    gear: [
      ["i-clipboard","Core: Pack, Shelter, Sleep, Water, Cook, Clothing, First Aid, Toiletries, Ditch Bag, Food, Electronics"],
      ["i-idea","Augments: Poles, bear canister, sun protection, layers, waterproofs"]
    ],

    risk: [
      ["i-sun","Storm window 13:00–17:00"],
      ["i-mountain","Exposure on passes"],
      ["i-link","Limited bailouts"]
    ],

    contacts: {
      Emergency: "911",
      Ranger: "Grand Teton NP dispatch",
      Hospital: "Jackson, WY (verify)"
    },

    gpx: {
      embed: "https://gpx.studio/?state=%7B%7D",   /* swap with your live share */
      chips: [
        ["i-ruler","~39 mi"], ["i-mountain","+7200 / -8200 ft"], ["i-calendar","4 days"]
      ],
      note: "Starter-only preview. Replace with client-specific GPX when finalized."
    },

    disclaimer: "This blueprint is intel, not a guarantee. Conditions change without warning. You are responsible for verification and decision-making."
  };

  /* ---------- RENDER ---------- */
  const $ = (sel,p=document)=>p.querySelector(sel);
  const el = (tag,cls,txt)=>{ const n=document.createElement(tag); if(cls) n.className=cls; if(txt!==undefined) n.textContent=txt; return n; };
  const icon = (id)=>{ const s=document.createElementNS("http://www.w3.org/2000/svg","svg"); s.setAttribute("width","18");s.setAttribute("height","18"); s.innerHTML=`<use href="#${id}"/>`; return s; };

  // Title
  $("#pageTitle").textContent = data.title;

  // Top stats
  const statMap = [
    ["i-star","Category", data.meta.category],
    ["i-sun","Season", data.meta.season],
    ["i-pin","Location", data.meta.location],
    ["i-calendar","Date", data.meta.date]
  ];
  const stats = $("#stats");
  statMap.forEach(([ico,label,val])=>{
    const box = el("div","stat");
    const l = el("div","label"); l.append(icon(ico), document.createTextNode(label));
    const v = el("div","value", val);
    box.append(l,v); stats.append(box);
  });

  // Hero
  $("#heroImg").src = data.hero.src; $("#heroImg").alt = data.hero.alt || "Expedition hero";

  // Permits KV
  const permitsKV = $("#permitsKV");
  [["Requirement",data.permits.requirement],
   ["Agency",data.permits.agency],
   ["How to apply",data.permits.how],
   ["Window",data.permits.window],
   ["Processing",data.permits.processing],
   ["Cost",data.permits.cost],
   ["ID",data.permits.id]
  ].forEach(([k,v])=>{ permitsKV.append(el("div","k",k), el("div","v",v)); });

  // Shuttle (map first, then text)
  const map = $("#mapEmbed");
  map.innerHTML = `<iframe src="${data.shuttle.mapEmbed}" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>`;
  const shuttleKV = $("#shuttleKV");
  [["Nearest access",data.shuttle.nearest],
   ["Start",data.shuttle.start],
   ["Finish",data.shuttle.finish],
   ["Trail access",data.shuttle.access],
   ["Parking",data.shuttle.parking],
   ["Outfitter",data.shuttle.outfitter]
  ].forEach(([k,v])=>{ shuttleKV.append(el("div","k",k), el("div","v",v)); });

  // Timeline
  const timeKV = $("#timelineKV");
  data.timeline.forEach(([k,v])=>{ timeKV.append(el("div","k",k), el("div","v",v)); });

  // Days
  const dayWrap = $("#dayBlocks");
  data.days.forEach(d=>{
    const card = el("div","day");
    const h = el("h3"); h.append(icon("i-signpost"), document.createTextNode(" " + d.title)); card.append(h);
    const p = el("p","preview", d.preview); card.append(p);
    card.append(el("div","spacer"));
    const meta = el("div","meta");
    d.chips.forEach(([ico,txt])=>{ const c=el("span","chip"); const s=icon(ico); c.prepend(s); c.append(txt); meta.append(c); });
    card.append(meta);
    dayWrap.append(card);
  });

  // Campsite chips
  const campChips = $("#campChips");
  data.campsiteIntel.forEach(([ico,txt])=>{ const c=el("li","chip"); c.append(icon(ico), document.createTextNode(txt)); campChips.append(c); });

  // Weather chips
  const weatherChips = $("#weatherChips");
  data.weatherNotes.forEach(([ico,txt])=>{ const c=el("li","chip"); c.append(icon(ico), document.createTextNode(txt)); weatherChips.append(c); });

  // Gear chips
  const gearChips = $("#gearChips");
  data.gear.forEach(([ico,txt])=>{ const c=el("li","chip"); c.append(icon(ico), document.createTextNode(txt)); gearChips.append(c); });

  // Risk chips
  const riskChips = $("#riskChips");
  data.risk.forEach(([ico,txt])=>{ const c=el("li","chip"); c.append(icon(ico), document.createTextNode(txt)); riskChips.append(c); });

  // Contacts
  const contactsKV = $("#contactsKV");
  Object.entries(data.contacts).forEach(([k,v])=>{ contactsKV.append(el("div","k",k), el("div","v",v)); });

  // GPX
  $("#gpxEmbed").innerHTML = `<iframe src="${data.gpx.embed}" loading="lazy"></iframe>`;
  const gpxChips = $("#gpxChips");
  data.gpx.chips.forEach(([ico,txt])=>{ const c=el("li","chip"); c.append(icon(ico), document.createTextNode(txt)); gpxChips.append(c); });
  $("#gpxNote").textContent = data.gpx.note || "";

  // Disclaimer
  $("#disclaimerText").textContent = data.disclaimer;

  // Share/Bookmark (no dialogs; silent fallbacks)
  $("#btnShare").addEventListener("click", async (e)=>{
    e.preventDefault();
    try{ if(navigator.share) await navigator.share({title: document.title, url: location.href}); }catch(_){}
  });
  $("#btnBookmark").addEventListener("click",(e)=>{
    e.preventDefault();
    alert("Tip: Add to Reading List or use your browser’s bookmark control.");
  });
})();
</script>
</body>
</html>
